/* src/app/globals.css */
@import "tailwindcss";

/* Tailwind v4 color tokens (enable bg-rh-, text-rh-, border-rh- utilities) */
@theme {
  /* Core brand (RGB channel values) */
  --color-rh-pink-light: 246 104 121;
  --color-rh-pink-dark:  238 50 70;
  --color-rh-pink-shell: 136 62 67;

  --color-rh-cyan:        0 206 209;
  --color-rh-cyan-light:  64 224 208;
  --color-rh-orange:      255 69 0;
  --color-rh-orange-light: 255 165 0;
  --color-rh-purple:      138 43 226;
  --color-rh-green:       50 205 50;

  /* Optional named text tokens (if you use text-rh-text-primary utilities) */
  --color-rh-text-primary:   255 255 255;
  --color-rh-text-secondary: 215 215 216;

  /* Aliases (if you still use rave-* utilities) â€” use numeric values, not var() */
  --color-rave-pink:   246 104 121;
  --color-rave-cyan:   0 206 209;
  --color-rave-orange: 255 69 0;
  --color-rave-purple: 138 43 226;
}

@layer base {
  /* ðŸŽ¨ Ravehouse mural palette â€“ DMC based */
  :root,
  .dark {
    /* Reds / pinks */
    --rh-pink-shell-vdark: 136 62 67; /* DMC 221 Very Dark Shell Pink */
    --rh-pink-dark:        238 50 70; /* DMC 891 Dark Carnation */
    --rh-pink-light:       246 104 121; /* DMC 893 Light Carnation */
    --rh-red:              220 38 38; /* Tailwind Red 600 */

    /* Cyans */
    --rh-cyan:       0 206 209; /* Dark Turquoise */
    --rh-cyan-light: 64 224 208; /* Turquoise */

    /* Oranges */
    --rh-orange:       255 69 0; /* Orange Red */
    --rh-orange-light: 255 165 0; /* Orange */

    /* Purples */
    --rh-purple:       138 43 226; /* Blue Violet */
    --rh-purple-light: 153 50 204; /* Dark Orchid */

    /* Greens */
    --rh-green: 50 205 50; /* Lime Green */

    /* Grays */
    --rh-tin:          215 215 216; /* DMC 02 Tin */
    --rh-tin-dark:     174 174 177; /* DMC 04 Dark Tin */
    --rh-pewter-vdark: 66 66 66; /* DMC 3799 Very Dark Pewter Gray */

    /* Base surfaces & radii */
    --rh-bg-page:   15 5 8;
    --rh-bg-card:   20 8 12;
    --rh-bg-surface: 0 0 0;
    --rh-text-primary: 255 255 255;
    --rh-text-secondary: 215 215 216;
    --rh-border: 255 255 255;
    --rh-border-subtle: 215 215 216;

    --rh-radius-lg: 1.5rem;
    --rh-radius-md: 1rem;

    color-scheme: dark;
  }

  /* Light Theme */
  .light {
    --rh-bg-page: 255 250 252;
    --rh-bg-card: 255 245 248;
    --rh-bg-surface: 255 255 255;
    --rh-text-primary: 0 0 0;
    --rh-text-secondary: 136 62 67;
    --rh-border: 0 0 0;
    --rh-border-subtle: 136 62 67;

    color-scheme: light;
  }
}

/* Reset-ish basics */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
  min-height: 100%;
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
    "Inter", sans-serif;
  background: rgb(var(--rh-bg-page));
  color: rgb(var(--rh-text-secondary));
}

/* Light mode body background */
.light body {
  background:
    radial-gradient(circle at 0% 0%, rgba(246, 104, 121, 0.15) 0%, transparent 45%),
    radial-gradient(circle at 100% 100%, rgba(136, 62, 67, 0.15) 0%, transparent 55%),
    rgb(var(--rh-bg-page));
  color: rgb(var(--rh-text-primary));
}

/* Light mode surface */
.light .surface {
  background: rgba(var(--rh-bg-surface), 0.9);
  border: 1px solid rgba(var(--rh-border-subtle), 0.2);
  box-shadow: 0 18px 45px rgba(0, 0, 0, 0.1);
}

/* Light mode button ghost variant */
.light .btn-ghost {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(0, 0, 0, 0.15);
  color: rgb(60, 60, 60);
}

.light .btn-ghost:hover {
  border-color: rgb(246, 104, 121);
  color: rgb(246, 104, 121);
}

/* ðŸ”§ Reusable primitives */

@layer components {
  /* Glassy card container */
  .surface {
    border-radius: var(--rh-radius-lg);
    background:
      radial-gradient(circle at 0 0, rgba(246, 104, 121, 0.12), transparent 55%),
      radial-gradient(circle at 100% 100%, rgba(136, 62, 67, 0.18), transparent 60%),
      rgba(10, 5, 8, 0.9);
    border: 1px solid rgba(var(--rh-border-subtle), 0.18);
    box-shadow:
      0 18px 45px rgba(0, 0, 0, 0.75),
      0 0 0 1px rgba(0, 0, 0, 0.6);
    -webkit-backdrop-filter: blur(24px);
    backdrop-filter: blur(24px);
  }

  /* Graceful fallback when backdrop-filter isn't supported */
  @supports not ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) {
    .surface {
      /* Slightly more opaque background to mimic separation without blur */
      background:
        radial-gradient(circle at 0 0, rgba(246, 104, 121, 0.12), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(136, 62, 67, 0.18), transparent 60%),
        rgba(10, 5, 8, 0.95);
      /* Reduce shadow intensity to avoid muddy visuals on non-blur browsers */
      box-shadow:
        0 12px 30px rgba(0, 0, 0, 0.6),
        0 0 0 1px rgba(0, 0, 0, 0.55);
    }
  }

  /* Buttons */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.6rem 1.2rem;
    border-radius: 999px;
    font-weight: 500;
    font-size: 0.9rem;
    border: 1px solid transparent;
    cursor: pointer;
    transition:
      background 150ms ease-out,
      color 150ms ease-out,
      box-shadow 150ms ease-out,
      transform 120ms ease-out;
  }

  .btn:focus-visible {
    outline: 2px solid rgb(var(--rh-cyan));
    outline-offset: 2px;
  }

  .btn:focus:not(:focus-visible) {
    outline: none;
  }

  .btn-primary {
    background: linear-gradient(
      135deg,
      rgb(var(--rh-pink-light)),
      rgb(var(--rh-pink-dark))
    );
    color: #fff;
    box-shadow:
      0 0 18px rgba(246, 104, 121, 0.45),
      0 12px 30px rgba(0, 0, 0, 0.7);
  }

  .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow:
      0 0 22px rgba(246, 104, 121, 0.7),
      0 14px 36px rgba(0, 0, 0, 0.85);
  }

  .btn-primary:focus-visible {
    outline: 2px solid rgb(var(--rh-cyan));
    outline-offset: 2px;
    box-shadow:
      0 0 18px rgba(246, 104, 121, 0.45),
      0 12px 30px rgba(0, 0, 0, 0.7),
      0 0 0 4px rgba(var(--rh-cyan), 0.3);
  }

  .btn-primary:focus:not(:focus-visible) {
    outline: none;
  }

  /* Default dark theme button ghost */
  .btn-ghost,
  .dark .btn-ghost {
    background: rgba(10, 8, 10, 0.8);
    border-color: rgba(var(--rh-border-subtle), 0.3);
    color: rgb(var(--rh-tin));
  }

  .btn-ghost:hover,
  .dark .btn-ghost:hover {
    border-color: rgb(var(--rh-pink-light));
    color: rgb(var(--rh-pink-light));
  }

  .btn-ghost:focus-visible,
  .dark .btn-ghost:focus-visible {
    outline: 2px solid rgb(var(--rh-cyan));
    outline-offset: 2px;
    border-color: rgba(var(--rh-border-subtle), 0.5);
    box-shadow: 0 0 0 4px rgba(var(--rh-cyan), 0.3);
  }

  .btn-ghost:focus:not(:focus-visible),
  .dark .btn-ghost:focus:not(:focus-visible) {
    outline: none;
  }

  /* Misc utilities */
  .hr-soft {
    border: 0;
    border-top: 1px solid rgba(215, 215, 216, 0.15);
    margin: 1.5rem 0;
  }

  .hide-scrollbar {
    scrollbar-width: none;
  }
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Accessibility utilities */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Enhanced focus states */
  a:focus-visible,
  button:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  [role="button"]:focus-visible,
  [tabindex]:not([tabindex="-1"]):focus-visible {
    outline: 2px solid rgb(var(--rh-cyan));
    outline-offset: 2px;
  }

  /* Skip link for keyboard users */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: rgb(var(--rh-pink-light));
    color: white;
    padding: 8px 16px;
    text-decoration: none;
    border-radius: 0 0 4px 4px;
    font-weight: 500;
    font-size: 14px;
    z-index: 1000;
    transition: top 0.2s ease-in-out;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  .skip-link:focus {
    top: 6px;
    outline: 2px solid rgb(var(--rh-cyan));
    outline-offset: 2px;
  }

  .skip-link:focus:not(:focus-visible) {
    outline: none;
  }
}

@layer utilities {
  /* Tiny font-size utilities for consistent chip sizing */
  .text-10 { font-size: 10px; }
  .text-11 { font-size: 11px; }
  .text-12 { font-size: 12px; }
  
  /* Essential v4 utilities */
  .text-xxs { font-size: 0.688rem; line-height: 1rem; }
}

@layer utilities {
  .text-brand-pink   { color: rgb(var(--rh-pink-light)); }
  .text-brand-cyan   { color: rgb(var(--rh-cyan)); }
  .text-brand-orange { color: rgb(var(--rh-orange)); }
  .text-brand-purple { color: rgb(var(--rh-purple)); }
  .text-brand-green  { color: rgb(var(--rh-green)); }
}

/* Custom prose styles to replace @tailwindcss/typography */
.prose {
  max-width: 65ch;
}

.prose p {
  margin-top: 1.25em;
  margin-bottom: 1.25em;
}

.prose h1 {
  color: rgb(var(--rh-text-primary));
  font-weight: 800;
  font-size: 2.25em;
  margin-top: 0;
  margin-bottom: 0.8888889em;
  line-height: 1.1111111;
}

.prose h2 {
  color: rgb(var(--rh-text-primary));
  font-weight: 700;
  font-size: 1.5em;
  margin-top: 2em;
  margin-bottom: 1em;
  line-height: 1.3333333;
}

.prose h3 {
  color: rgb(var(--rh-text-primary));
  font-weight: 600;
  font-size: 1.25em;
  margin-top: 1.6em;
  margin-bottom: 0.6em;
  line-height: 1.6;
}

.prose h4 {
  color: rgb(var(--rh-text-primary));
  font-weight: 600;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
  line-height: 1.5;
}

.prose ul {
  margin-top: 1.25em;
  margin-bottom: 1.25em;
  padding-left: 1.625em;
}

.prose ol {
  margin-top: 1.25em;
  margin-bottom: 1.25em;
  padding-left: 1.625em;
}

.prose li {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.prose blockquote {
  font-weight: 500;
  font-style: italic;
  color: rgb(var(--rh-text-secondary));
  border-left-width: 0.25rem;
  border-left-color: rgb(var(--rh-border-subtle));
  quotes: '\201C''\201D''\2018''\2019';
  margin-top: 1.6em;
  margin-bottom: 1.6em;
  padding-left: 1em;
}

.prose strong {
  color: rgb(var(--rh-text-primary));
  font-weight: 600;
}

.prose a {
  color: rgb(var(--rh-pink-light));
  text-decoration: underline;
  font-weight: 500;
}

.prose a:hover {
  color: rgb(var(--rh-pink-dark));
}

.prose code {
  color: rgb(var(--rh-text-primary));
  font-weight: 600;
  font-size: 0.875em;
  background-color: rgba(255, 255, 255, 0.1);
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
}

.prose pre {
  background-color: rgba(0, 0, 0, 0.5);
  border-radius: 0.375rem;
  padding: 1rem;
  overflow-x: auto;
  margin-top: 1.7142857em;
  margin-bottom: 1.7142857em;
}

.prose pre code {
  background-color: transparent;
  padding: 0;
  border-radius: 0;
  font-weight: 400;
}

/* Dark mode styles */
.prose-invert {
  --rh-text-primary: 255 255 255;
  --rh-text-secondary: 215 215 216;
  --rh-border-subtle: 215 215 216;
}

/* Light mode styles */
:root:not(.dark) .prose {
  --rh-text-primary: 0 0 0;
  --rh-text-secondary: 136 62 67;
  --rh-border-subtle: 136 62 67;
}
